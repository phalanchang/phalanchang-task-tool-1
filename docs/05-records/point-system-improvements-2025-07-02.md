# ポイントシステム改善対応 - 2025年7月2日

## 📋 対応項目

### 🔧 修正が必要な問題点

1. **繰り返しタスク編集時のポイント更新問題**
   - 現象: 繰り返しタスクの「編集」からポイントを入力して「更新する」ボタンを押下してもタスクのポイントが更新されない
   - 原因: バックエンドAPIでポイントフィールドが更新処理に含まれていない可能性
   - 影響度: 高

2. **繰り返しタスクフォームのUI改善**
   - 現象: 繰り返しタスクの設定時にスクロールが大変
   - 改善要求: 項目名と入力の枠を横に並べる形式に変更
   - 影響度: 中（UX改善）

3. **タスクカードへのポイント表示**
   - 現象: 各タスクのカードに設定されているポイントが表示されていない
   - 要求: タスクカードにポイント情報を表示
   - 影響度: 中（機能拡張）

## 🎯 実装方針

### 1. 繰り返しタスク編集時のポイント更新修正

#### バックエンド修正
- `tasksController.js`の`updateRecurringTask`関数を調査
- ポイントフィールドが更新SQLに含まれているか確認
- 必要に応じてSQL文とバリデーション追加

#### フロントエンド修正
- `RecurringTaskForm`からのデータ送信確認
- API呼び出し時にポイントデータが含まれているか検証

### 2. 繰り返しタスクフォームレイアウト改善

#### CSS改善
- 現在の縦並びレイアウトを横並びレイアウトに変更
- グリッドレイアウトまたはFlexboxを使用
- レスポンシブ対応維持

#### HTML構造改善
- ラベルと入力フィールドをインライン配置
- フォーム全体の高さを削減
- スクロール必要性を最小化

### 3. タスクカードポイント表示追加

#### TaskCard コンポーネント修正
- ポイント表示エリアを追加
- 既存のデザインと調和したスタイル適用
- ゼロポイントの場合の表示制御

#### CSS スタイル追加
- ポイント表示用のスタイルクラス作成
- アイコンとテキストの配置調整
- カードレイアウトへの統合

## 📁 修正対象ファイル

### バックエンド
- `backend/src/controllers/tasksController.js`
- `backend/src/models/Task.js` (必要に応じて)

### フロントエンド
- `frontend/src/components/RecurringTaskForm.tsx`
- `frontend/src/components/TaskCard.tsx`
- `frontend/src/components/TaskCard.css`
- 新規: `frontend/src/components/RecurringTaskForm.css` (必要に応じて)

### ドキュメント
- 本ドキュメント (`docs/05-records/point-system-improvements-2025-07-02.md`)

## 🧪 テスト計画

### 機能テスト
1. **ポイント更新テスト**
   - 繰り返しタスク作成 → ポイント設定 → 保存確認
   - 繰り返しタスク編集 → ポイント変更 → 更新確認
   - データベース値の確認

2. **UIレイアウトテスト**
   - デスクトップでのフォーム表示確認
   - タブレット・モバイルでのレスポンシブ確認
   - スクロール必要性の確認

3. **ポイント表示テスト**
   - ポイント設定済みタスクの表示確認
   - ゼロポイントタスクの表示確認
   - 各優先度でのポイント表示確認

### 動作確認手順
1. Docker環境起動
2. 繰り返しタスク作成（ポイント設定）
3. 作成されたタスクのポイント表示確認
4. 繰り返しタスク編集（ポイント変更）
5. 変更反映確認
6. デイリータスク生成・表示確認

## 📊 期待される改善効果

### UX改善
- フォーム入力時間の短縮（スクロール削減）
- 視覚的な情報量増加（ポイント表示）
- データ更新の信頼性向上

### 開発効率
- UI改善によるユーザビリティテスト工数削減
- ポイント機能の完全動作による機能テスト完了

## 🔄 実装順序
1. ドキュメント作成（本ファイル）
2. バックエンドポイント更新修正
3. フロントエンドフォームレイアウト改善
4. タスクカードポイント表示追加
5. 総合テスト・動作確認
6. コミット・プッシュ

---

**作成者**: Claude Code Assistant  
**作成日**: 2025年7月2日  
**ブランチ**: feature/point-system-improvements
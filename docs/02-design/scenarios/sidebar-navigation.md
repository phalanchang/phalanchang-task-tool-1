# 利用シナリオ - サイドバーナビゲーション

**作成日**: 2025-06-18  
**最終更新**: 2025-06-18  
**関連機能**: SIDEBAR-001  

---

## 🎯 シナリオ概要

サイドバーを使った基本的なナビゲーション操作のユーザージャーニーを定義します。

---

## 👤 ペルソナ

**田中さん（プロジェクトマネージャー）**
- 年齢: 35歳
- デバイス: デスクトップPC（主）、スマートフォン（移動時）
- 使用頻度: 平日毎日、1日3-4回タスク管理画面を確認

---

## 📱 シナリオ 1: デスクトップでの基本ナビゲーション

### 前提条件
- ユーザーがダッシュボード画面（`/`）にいる
- ブラウザの画面幅は 1200px（デスクトップ）
- サイドバーが常時表示状態

### ステップ
1. **画面確認**
   - 左側に250px幅のサイドバーが表示されている
   - 「ダッシュボード」項目がアクティブ状態（青色ハイライト）
   - 「タスク管理」「設定」項目が通常状態で表示

2. **タスク管理への移動**
   - 田中さんが「タスク管理」項目をクリック
   - 画面が `/tasks` に遷移
   - 「タスク管理」項目がアクティブ状態に変更
   - 「ダッシュボード」項目が通常状態に戻る

3. **設定画面への移動**
   - 田中さんが「設定」項目をクリック
   - 画面が `/settings` に遷移
   - 「設定」項目がアクティブ状態に変更

### 期待結果
- [x] 各クリックで正しいページに遷移する
- [x] アクティブ状態が正しく切り替わる
- [x] ページロード時間が2秒以下
- [x] サイドバーの表示が崩れない

---

## 📱 シナリオ 2: モバイルでのハンバーガーメニュー操作

### 前提条件
- ユーザーがスマートフォンでアクセス（画面幅375px）
- ダッシュボード画面（`/`）にいる
- サイドバーが非表示状態

### ステップ
1. **初期画面確認**
   - ヘッダー左上にハンバーガーアイコン（☰）が表示
   - サイドバーは画面外に隠れている
   - メインコンテンツが全幅で表示

2. **サイドバーを開く**
   - 田中さんがハンバーガーアイコンをタップ
   - サイドバーが左からスライドインして表示
   - サイドバー幅は画面幅の80%（300px）
   - メインコンテンツの上にオーバーレイ表示

3. **タスク管理へ移動**
   - 田中さんが「タスク管理」をタップ
   - `/tasks` ページに遷移
   - サイドバーが自動的に閉じる

4. **再度サイドバーを開く**
   - ハンバーガーアイコンをタップ
   - 「タスク管理」がアクティブ状態で表示

5. **背景タップで閉じる**
   - サイドバー外の背景をタップ
   - サイドバーが左にスライドアウトして非表示

### 期待結果
- [x] スムーズなスライドアニメーション（300ms以内）
- [x] タッチ操作で正確に反応
- [x] ページ遷移時にサイドバーが自動で閉じる
- [x] 背景タップで確実に閉じる

---

## 🔄 シナリオ 3: レスポンシブ切り替え

### 前提条件
- ユーザーがデスクトップブラウザを使用
- 初期画面幅は 1200px でサイドバーが常時表示

### ステップ
1. **デスクトップモード確認**
   - サイドバーが左側に固定表示
   - メインコンテンツが右側に表示

2. **画面幅を縮小**
   - ブラウザウィンドウを768px以下に縮小
   - サイドバーが自動的に非表示になる
   - ハンバーガーアイコンが表示される
   - メインコンテンツが全幅になる

3. **モバイルモードでの操作**
   - ハンバーガーアイコンをクリック
   - サイドバーがオーバーレイ表示

4. **画面幅を拡大**
   - ブラウザウィンドウを768px以上に拡大
   - オーバーレイサイドバーが消える
   - 固定サイドバーが再び表示される

### 期待結果
- [x] 768pxのブレークポイントで正確に切り替わる
- [x] 表示モードの変更がスムーズ
- [x] アクティブ状態が保持される
- [x] レイアウトの崩れが発生しない

---

## ⌨️ シナリオ 4: キーボードナビゲーション

### 前提条件
- ユーザーがキーボードのみで操作
- デスクトップ画面でアクセシビリティモード

### ステップ
1. **初期フォーカス確認**
   - ページロード時にサイドバーの最初の項目にフォーカス

2. **Tab キーナビゲーション**
   - Tab キーを押してナビゲーション項目間を移動
   - フォーカスリングが明確に表示される

3. **Enter キーで選択**
   - 「タスク管理」にフォーカスがある状態で Enter
   - ページが `/tasks` に遷移

4. **Shift+Tab で逆方向移動**
   - Shift+Tab で前の項目に戻る

### 期待結果
- [x] 全てのナビゲーション項目がキーボード操作可能
- [x] フォーカスインジケーターが明確
- [x] Enter キーで確実に動作
- [x] Tab順序が論理的

---

## 📊 成功指標

### パフォーマンス指標
- ページ遷移時間: < 1秒
- サイドバーアニメーション: < 300ms
- 初期表示時間: < 2秒

### ユーザビリティ指標
- クリック成功率: > 99%
- モバイルタップ成功率: > 98%
- キーボード操作完了率: > 95%

### アクセシビリティ指標
- Lighthouse Accessibility Score: > 95
- スクリーンリーダー対応: 100%
- キーボードナビゲーション: 100%

---

## 🚨 エラー・例外シナリオ

### シナリオ 5: ネットワーク遅延時の動作

**状況**: 低速ネットワーク環境でのページ遷移

**ステップ**:
1. 田中さんが「タスク管理」をクリック
2. ネットワークが遅く、ページロードに5秒かかる
3. この間、田中さんが他のナビゲーション項目をクリック

**期待動作**:
- [x] ローディング状態の表示
- [x] 重複クリックの防止
- [x] 適切なエラーハンドリング

### シナリオ 6: JavaScript無効環境

**状況**: JavaScript が無効なブラウザでのアクセス

**期待動作**:
- [x] 基本的なリンクナビゲーションが機能
- [x] サイドバーが最低限表示される
- [x] グレースフルデグラデーション

---

## 🔗 関連ドキュメント

- [機能要件書 SIDEBAR-001](../../01-requirements/features/SIDEBAR-001.md)
- [受け入れ基準](../../01-requirements/acceptance-criteria.md#epic-1)
- [ユーザーストーリー](../../01-requirements/user-stories.md#epic-1)

---

## 📝 備考

### 検証環境
- Chrome 最新版 / Firefox 最新版 / Safari 最新版
- iPhone Safari / Android Chrome
- Windows 10/11, macOS, Ubuntu

### 今後の拡張予定
- ドラッグ&ドロップでの項目並び替え
- カスタマイズ可能なナビゲーション項目
- ダークモード対応